<!DOCTYPE html>

<html lang="zh">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>ST计划</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="css/main.css">
</head>

<body>
    <div class="container mt-4">
        <div class="row">
            <div class="col-md-3">
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="card-title">设置</h5>
                    </div>
                    <div class="card-body">
                        <form class="mb-3" id="birthDateForm">
                            <div class="mb-3">
                                <label class="form-label">出生日期 (YYYYMMDD):</label>
                                <input class="form-control" id="birthDate" type="text" />
                            </div>
                            <button class="btn btn-primary w-100" type="submit">设置出生日期</button>
                        </form>
                        <button class="btn btn-primary w-100 mb-3" onclick="showAgeSettingsModal()">添加时间进度</button>
                        <form id="goalForm">
                            <div class="mb-3">
                                <label class="form-label">存款内容:</label>
                                <input class="form-control" id="goalName" type="text" />
                            </div>
                            <div class="mb-3">
                                <label class="form-label">目标金额:</label>
                                <input class="form-control" id="goalAmount" type="text" />
                            </div>
                            <button class="btn btn-primary w-100" type="submit">添加存款进度</button>
                        </form>
                        <div class="card mt-2">
                            <div class="card-header py-2">记录存取款</div>
                            <div class="card-body p-2">
                                <form id="moneyForm">
                                    <div class="mb-2">
                                        <div class="btn-group w-100" role="group">
                                            <input class="btn-check" id="depositType" name="operationType" type="radio"
                                                value="deposit" />
                                            <label class="btn btn-outline-success" for="depositType">存入</label>
                                            <input class="btn-check" id="withdrawType" name="operationType" type="radio"
                                                value="withdraw" />
                                            <label class="btn btn-outline-warning" for="withdrawType">取出</label>
                                        </div>
                                    </div>
                                    <div class="mb-2">
                                        <label class="form-label mb-1">金额:</label>
                                        <input class="form-control form-control-sm" id="amount" type="text" />
                                    </div>
                                    <div class="mb-2">
                                        <label class="form-label mb-1">备注:</label>
                                        <input class="form-control form-control-sm" id="note" placeholder="可选"
                                            type="text" />
                                    </div>
                                    <button class="btn btn-primary btn-sm w-100" type="submit">确认</button>
                                </form>
                            </div>
                        </div>
                        <div class="text-center mt-4">
                            <div>总存款</div>
                            <div class="text-success fs-4 fw-bold" id="totalSaved">${formatMoney(appData.totalSaved)}
                            </div>
                            <div class="text-muted mt-2">
                                <div id="currentDate"></div>
                                <div id="currentTime"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-9">
                <div class="card">
                    <div class="card-header">
                        <div class="d-flex flex-column flex-md-row align-items-start align-items-md-center">
                            <h5 class="card-title mb-2 mb-md-0 me-md-3">火星进度</h5>
                            <div class="btn-group flex-wrap" role="group">
                                <input class="btn-check" id="savingsMode" name="viewMode" type="radio" />
                                <label class="btn btn-outline-primary" for="savingsMode">存款进度</label>
                                <input class="btn-check" id="ageMode" name="viewMode" type="radio" />
                                <label class="btn btn-outline-primary" for="ageMode">时间进度</label>
                                <input class="btn-check" id="historyMode" name="viewMode" type="radio" />
                                <label class="btn btn-outline-primary" for="historyMode">历史记录</label>
                                <input class="btn-check" id="archiveMode" name="viewMode" type="radio" />
                                <label class="btn btn-outline-primary" for="archiveMode">归档记录</label>
                                <input class="btn-check" id="todoMode" name="viewMode" type="radio" />
                                <label class="btn btn-outline-primary" for="todoMode">待办事项</label>
                                <input class="btn-check" id="inspirationMode" name="viewMode" type="radio" />
                                <label class="btn btn-outline-primary" for="inspirationMode">灵感记录</label>
                                <input class="btn-check" id="habitMode" name="viewMode" type="radio" />
                                <label class="btn btn-outline-primary" for="habitMode">习惯打卡</label>
                                <input class="btn-check" id="timeTrackingMode" name="viewMode" type="radio" />
                                <label class="btn btn-outline-primary" for="timeTrackingMode">时间统计</label>
                                <input class="btn-check" id="personalDataMode" name="viewMode" type="radio" />
                                <label class="btn btn-outline-primary" for="personalDataMode">个人数据</label>
                            </div>
                        </div>
                        <div class="d-flex flex-wrap align-items-center gap-2">
                            <!-- 导入导出按钮组 -->
                            <div class="d-flex gap-2">
                                <button class="btn btn-primary btn-sm py-1 px-3" onclick="exportData()"
                                    style="min-width: 80px;">导出数据</button>
                                <button class="btn btn-success btn-sm py-1 px-3"
                                    onclick="document.getElementById('importFile').click()"
                                    style="min-width: 80px;">导入数据</button>
                                <input accept=".json" id="importFile" onchange="importData(event)" style="display: none"
                                    type="file" />
                            </div>
                            <!-- 右侧功能按钮组，使用 ms-auto 将其推到最右边 -->
                            <div class="d-flex gap-2 ms-auto">
                                <!-- 清空按钮 -->
                                <button class="btn btn-warning btn-sm py-1 px-3" onclick="clearHistory()"
                                    style="min-width: 80px;">清空历史</button>
                                <button class="btn btn-warning btn-sm py-1 px-3" onclick="clearArchived()"
                                    style="min-width: 80px;">清空归档</button>
                                <!-- 重置按钮 -->
                                <button class="btn btn-danger btn-sm py-1 px-3" onclick="resetSavings()"
                                    style="min-width: 80px;">重置存款</button>
                                <button class="btn btn-danger btn-sm py-1 px-3" onclick="resetTime()"
                                    style="min-width: 80px;">重置时间</button>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="goal-container" id="goalsContainer">
                            <!-- Goals will be added here dynamically -->
                        </div>
                        <!-- 添加时间统计界面 -->
                        <div class="time-tracking-container view-container" style="display: none;">
                            <h3 class="mb-3">时间统计</h3>
                            <button class="btn btn-primary add-event-btn" onclick="addNewEvent()">
                                <i class="fas fa-plus"></i> 添加新事件
                            </button>
                            <div id="events-container">
                                <!-- 事件卡片将在这里动态添加 -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 脚本应该放在这里，在 body 结束前 -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"></script>
    <script type="module" src="js/main.js"></script>
</body>

</html>